<!DOCTYPE html>
<html lang="en">
    <head>

    </head>
    <body>
        <div id="map"></div>

        <script src=""https://unpkg.com/topojson@3"></script>
        <script defer type="module">
            // From https://obserablehq.com/@d3/zoom-to-bounding-box?intent=fork
            import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

            function getSVGNode(us) {
                const width = 975;
                const height = 610;

                /*
                    const zooom = d3.zoom()
                        .scaleExtent([1,8])
                        .on("zoom", zoomed);
                */

                const svg = d3.create("svg")
                .attr("viewBox", [0, 0, width, height])
                .attr("width", width)
                .attr("height", height)
                .attr("style", "max-width: 100%; height: auto;")
                //.on("click", rest);

                const path = d3.geoPath();

                const g = svg.append("g");

                const states = g.append("g")
                    .attr("fill", "#444")
                    .attr("cursor", "pointer")
                    .selectAll("path")
                    .data(topojson.feature(us, us.objects.states).features)
                    .join("path")
                    .attr("d", path);
                    //.on("click", clicked)

                return svg.node();
            }

            const main = async () => {
                const response = await fetch("/us.json");
                const us = await response.json();
                const svgNode = getSVGNode(us);
                const mapDiv = document.getElementById("map");
                mapDiv.appendChild(svgNode);

            }
            main();
        </script>
    </body>
</html>